{"version":3,"sources":["pages/Movies/Movies.js","pages/Movies/Movies.module.css"],"names":["MovieDetailsPage","lazy","Movies","useState","query","setQuery","movies","setMovies","history","useHistory","location","useLocation","changeHandler","e","inputQuery","target","value","submitHandler","a","preventDefault","push","search","useEffect","movie","queryString","parse","getMoviesList","then","res","data","results","fallback","type","color","path","component","exact","render","onSubmit","className","styles","searchForm","placeholder","onChange","list","map","key","id","to","pathname","state","from","link","title","name","module","exports"],"mappings":"uRAUMA,G,MAAmBC,gBAAK,kBAC5B,kCA2EaC,UAxEA,WAAO,IAAD,EACOC,mBAAS,IADhB,mBACZC,EADY,KACLC,EADK,OAESF,mBAAS,IAFlB,mBAEZG,EAFY,KAEJC,EAFI,KAIbC,EAAUC,cACVC,EAAWC,cAEXC,EAAgB,SAACC,GACrB,IAAMC,EAAaD,EAAEE,OAAOC,MAC5BX,EAASS,IAGLG,EAAa,uCAAG,WAAOJ,GAAP,SAAAK,EAAA,sDACpBL,EAAEM,iBACFX,EAAQY,KAAR,2BAAkBV,GAAlB,IAA4BW,OAAO,UAAD,OAAYjB,MAF1B,2CAAH,sDAkBnB,OAbAkB,qBAAU,WACR,IAAMC,EAAQC,IAAYC,MAAMf,EAASW,QAAQjB,MAC5CmB,IACHhB,EAAU,IACVF,EAAS,KAGPK,EAASW,SACXK,YAAcH,GAAOI,MAAK,SAACC,GAAD,OAASrB,EAAUqB,EAAIC,KAAKC,YACtDzB,EAASkB,MAEV,CAACb,EAASW,SAGX,kBAAC,WAAD,CAAUU,SAAU,kBAAC,IAAD,CAAQC,KAAK,WAAWC,MAAM,UAChD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAK,mBAAmBC,UAAWnC,IAC1C,kBAAC,IAAD,CACEoC,OAAK,EACLF,KAAK,UACLG,OAAQ,kBACN,oCACE,0BAAMC,SAAUrB,EAAesB,UAAWC,IAAOC,YAC/C,2BACEC,YAAY,cACZ1B,MAAOZ,EACPuC,SAAU/B,IAEZ,2CAGF,wBAAI2B,UAAWC,IAAOI,MACnBtC,EAAOuC,KAAI,SAACtB,GAAD,OACV,kBAAC,IAAD,CACEuB,IAAKvB,EAAMwB,GACXC,GAAI,CACFC,SAAS,WAAD,OAAa1B,EAAMwB,IAC3BG,MAAO,CACLC,KAAMzC,IAGV6B,UAAWC,IAAOY,MAElB,4BAAK7B,EAAM8B,OAAS9B,EAAM+B,mB,mBCzE9CC,EAAOC,QAAU,CAAC,WAAa,2BAA2B,KAAO,qBAAqB,KAAO","file":"static/js/Movies.5b554721.chunk.js","sourcesContent":["/*core */\r\nimport React, { useState, useEffect, Suspense, lazy } from \"react\";\r\nimport { Switch, Route, Link, useHistory, useLocation } from \"react-router-dom\";\r\n/*instruments*/\r\nimport queryString from \"query-string\";\r\nimport { getMoviesList } from \"../../helpers/requestMaker\";\r\nimport styles from \"./Movies.module.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n/* components */\r\nconst MovieDetailsPage = lazy(() =>\r\n  import(\"../MovieDetailsPage/MovieDetailsPage\")\r\n);\r\n\r\nconst Movies = () => {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [movies, setMovies] = useState([]);\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const changeHandler = (e) => {\r\n    const inputQuery = e.target.value;\r\n    setQuery(inputQuery);\r\n  };\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    history.push({ ...location, search: `?query=${query}` });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const movie = queryString.parse(location.search).query;\r\n    if (!movie) {\r\n      setMovies([]);\r\n      setQuery(\"\");\r\n    }\r\n\r\n    if (location.search) {\r\n      getMoviesList(movie).then((res) => setMovies(res.data.results));\r\n      setQuery(movie);\r\n    }\r\n  }, [location.search]);\r\n\r\n  return (\r\n    <Suspense fallback={<Loader type=\"TailSpin\" color=\"#red\" />}>\r\n      <Switch>\r\n        <Route path=\"/movies/:movieId\" component={MovieDetailsPage} />\r\n        <Route\r\n          exact\r\n          path=\"/movies\"\r\n          render={() => (\r\n            <>\r\n              <form onSubmit={submitHandler} className={styles.searchForm}>\r\n                <input\r\n                  placeholder=\"enter movie\"\r\n                  value={query}\r\n                  onChange={changeHandler}\r\n                />\r\n                <button>Search</button>\r\n              </form>\r\n\r\n              <ul className={styles.list}>\r\n                {movies.map((movie) => (\r\n                  <Link\r\n                    key={movie.id}\r\n                    to={{\r\n                      pathname: `/movies/${movie.id}`,\r\n                      state: {\r\n                        from: location,\r\n                      },\r\n                    }}\r\n                    className={styles.link}\r\n                  >\r\n                    <li>{movie.title || movie.name}</li>\r\n                  </Link>\r\n                ))}\r\n              </ul>\r\n            </>\r\n          )}\r\n        />\r\n      </Switch>\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default Movies;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"Movies_searchForm__2Ymku\",\"list\":\"Movies_list__8zSnX\",\"link\":\"Movies_link__3nZ29\"};"],"sourceRoot":""}